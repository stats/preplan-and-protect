<form>
  <fieldset class="border p-2" *ngFor="let flow of preplans.current_preplan?.fireflows; let i = index">
    <legend class="w-auto">Fire Flow {{i + 1}}</legend>
    <div class="form-group">
      <label for="name[{{i}}]">Name</label>
      <input type="text" class="form-control" id="name[{{i}}]" name="name[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.fireflows[i].name" placeholder="Enter the fire flow name"/>
    </div>
    <div class="form-group">
      <label for="squareFootage[{{i}}]">Area Square Footage</label>
      <input class="form-control" id="squareFootage[{{i}}]" name="squareFootage[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.fireflows[i].squareFootage" placeholder="Enter the square footage for the area"/>
    </div>
  </fieldset>
  <div class="row">
    <div class="col-lg-12">
      <button type="button" class="btn btn-outline-secondary float-right" (click)="addFireflow()">+ add a fire flow</button>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Percent Involvement</th>
            <th scope="col">25%</th>
            <th scope="col">50%</th>
            <th scope="col">75%</th>
            <th scope="col">100%</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let flow of preplans.current_preplan?.fireflows; let i = index">
            <td>{{flow.name}}</td>
            <td>{{ (flow.squareFootage / 3) * 0.25 | number: '1.0-0'}} GPM</td>
            <td>{{ (flow.squareFootage / 3) * 0.50 | number: '1.0-0'}} GPM</td>
            <td>{{ (flow.squareFootage / 3) * 0.75 | number: '1.0-0'}} GPM</td>
            <td>{{ (flow.squareFootage / 3) | number: '1.0-0'}} GPM</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</form>
