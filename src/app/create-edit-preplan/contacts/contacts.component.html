<form>
  <fieldset class="border p-2" *ngFor="let contact of preplans.current_preplan?.contacts; let i = index">
    <legend class="w-auto">Contact {{i + 1}}</legend>
    <div class="form-group">
      <label for="name{{i}}">Name</label>
      <input type="text" class="form-control" id="alias{{i}}" name="alias{{i}}" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].name" placeholder="Enter the contact's name"/>
    </div>
    <div class="form-group">
      <label for="email{{i}}">Email</label>
      <input type="text" class="form-control" id="alias{{i}}" name="alias{{i}}" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].email" placeholder="Enter the contact's email address"/>
    </div>
    <fieldset class="border p-2" *ngFor="let phone of preplans.current_preplan?.contacts[i].phones; let j = index">
      <legend class="w-auto">Phone {{j + 1}}</legend>
      <div class="form-group">
        <label for="name[{{i}}][{{j}}]">Phone Type</label>
        <input type="text" class="form-control" id="type[{{i}}][{{j}}]" name="type[{{i}}][{{j}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].phones[j].type" placeholder="Enter the type of phone"/>
      </div>
      <div class="form-group">
        <label for="number[{{i}}][{{j}}]">Phone Number</label>
        <input type="text" class="form-control" id="number[{{i}}][{{j}}]" name="number[{{i}}][{{j}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].phones[j].number" placeholder="Enter the phone number"/>
      </div>
    </fieldset>
    <div class="row">
      <div class="col-lg-12">
        <button type="button" class="btn btn-outline-secondary float-right" (click)="addPhone(i)">+ add a phone</button>
      </div>
    </div>
    <div class="form-group">
      <label for="address[{{i}}]">Address</label>
      <input type="text" class="form-control" name="address[{{i}}]" id="address[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].address.adress" placeholder="Contact's street"/>
    </div>
    <div class="form-group">
      <label for="address2[{{i}}]">Address 2</label>
      <input type="text" class="form-control" id="address2[{{i}}]" name="address2[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].address.adress2" placeholder="Contact's apartment, studio, or floor"/>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="city[{{i}}]">City</label>
        <input type="text" class="form-control" id="city[{{i}}]" name="city[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].address.city" placeholder="City"/>
      </div>
      <div class="form-group col-md-4">
        <label for="state[{{i}}]">State</label>
        <input type="text" class="form-control" id="state[{{i}}]" name="state[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].address.state" placeholder="State"/>
      </div>
      <div class="form-group col-md-2">
        <label for="zipcode[{{i}}]">Zipcode</label>
        <input type="text" class="form-control" id="zipcode[{{i}}]" name="zipcode[{{i}}]" [(ngModel)]="preplans.current_preplan && preplans.current_preplan.contacts[i].address.city" placeholder="Zipcode"/>
      </div>
    </div>
  </fieldset>
  <div class="row">
    <div class="col-lg-12">
      <button type="button" class="btn btn-outline-secondary float-right" (click)="addContact()">+ add a contact</button>
    </div>
  </div>
</form>
